{"version":3,"sources":["../../../../assets/scripts/assets/scripts/screenadapt.js"],"names":["cc","Class","extends","Component","properties","left","default","type","Node","serializable","right","onLoad","setLandscape","sys","isNative","os","OS_ANDROID","jsb","reflection","callStaticMethod","OS_IOS","view","setOrientation","macro","ORIENTATION_LANDSCAPE","screenSize","getFrameSize","winSize","director","getWinSize","console","log","width","height","leftWidget","getComponent","Widget","rightWidget","setDesignResolutionSize","__initFrameSize__","_initFrameSize","apply","arguments","_isRotated","container","style","transform","setTimeout","_frameSize","convertToLocationInView","tx","ty","relatedPos","x","_devicePixelRatio","y","top","_viewPortRect"],"mappings":"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","file":"screenadapt.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        left: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type:cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        right: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type:cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n    },\n    onLoad () {\n        this.setLandscape()\n    },\n    setLandscape:function() {\n        if (cc.sys.isNative && cc.sys.os === cc.sys.OS_ANDROID) {\n            jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\",\n            \"changeOrientation\", \"(I)V\", 0); //0横1竖\n        }else if (cc.sys.isNative && cc.sys.os === cc.sys.OS_IOS) {\n            jsb.reflection.callStaticMethod(\"IOSHelper\", \"changeOrientation:\", 0);\n        }else {\n            cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);\n        }\n        var screenSize = cc.view.getFrameSize()\n        var winSize = cc.director.getWinSize()\n        \n        console.log(screenSize,\"+============screenSize=====\")\n        console.log(winSize,\"+============winSize=====\")\n        if((screenSize.width/screenSize.height)>2||(screenSize.width/screenSize.height)<0.5){\n            if(this.left && this.right){\n                var leftWidget = this.left.getComponent(cc.Widget)\n                var rightWidget = this.right.getComponent(cc.Widget)\n                leftWidget.left = 60\n                rightWidget.right = 60\n            }\n            cc.view.setDesignResolutionSize(1620,750,2)\n        }\n        //横屏模式修改为逆时针旋转90度\n        var __initFrameSize__ = cc.view._initFrameSize;\n        cc.view._initFrameSize = function () {\n            __initFrameSize__.apply(cc.view, arguments);\n\n        if (cc.view._isRotated && !cc.sys.isNative) {\n            cc.container.style['-webkit-transform'] = 'rotate(-90deg)';\n            cc.container.style.transform = 'rotate(-90deg)';\n            setTimeout(function () {\n                cc.container.style['margin'] = cc.view._frameSize.width + 'px 0px 0px';\n            });\n            cc.view.convertToLocationInView = function (tx, ty, relatedPos) {\n                var x = this._devicePixelRatio * (tx - relatedPos.left);\n                var y = this._devicePixelRatio * (relatedPos.top + relatedPos.height - ty);\n                return this._isRotated ? { x: y, y: cc.view._viewPortRect.height - x } : { x: x, y: y };\n            };\n        } else if (!cc.view._isRotated && !cc.sys.isNative) {\n            cc.view.convertToLocationInView = function (tx, ty, relatedPos) {\n                var x = this._devicePixelRatio * (tx - relatedPos.left);\n                var y = this._devicePixelRatio * (relatedPos.top + relatedPos.height - ty);\n                return this._isRotated ? { x: this._viewPortRect.width - y, y: x } : { x: x, y: y };\n            };\n        }\n        };\n        // this.windowRatio = this.node.width / 1280\n        // if (this.node.width < 1280) {\n        //   this.node.scale = this.windowRatio\n        // }\n    },\n    // update (dt) {\n      \n    // },\n});\n"]}