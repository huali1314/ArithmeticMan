{"version":3,"sources":["../../../../assets/scripts/assets/scripts/gameController.js"],"names":["EventListener","require","global","tips","cc","Class","extends","Component","properties","score","default","type","Label","serializable","value","leftBtns","Node","rightBtns","leftTimeLabel","teacher","truePrefab","Prefab","falsePrefab","maxCostTime","onLoad","self","playerAnswer","playerHasActiveAnswer","ready","isRight","isCaluingRoundResult","left_time","costTime","curAnswerringIdx","world","find","bg","getChildByName","scheduler","director","getScheduler","eventlistener","on","enable","enableOrUnenableBtn","judgeResult","fire","isRunning","visibleQuestion","generatorCurRoundQuestions","start","questions","rightResult","playerAnswers","updateValue","schedule","beginPrepare","pauseOrResumeGame","isPaused","resume","pause","children","idx","btn","getComponent","Button","enableAutoGrayEffect","interactable","onClickNumber","event","customEventData","updatePreQuestionAnswer","caluFinishQuestionNum","playerData","finishQuestiontotalNum","onClickSure","updatePlayerAnswer","runPlayerAction","updateQuestionAnswer","sysInfo","wx","getStorageInfo","console","log","question","questionLabel","string","length","judgeQuestions","instantiate","setPosition","addChild","removeQuestionChildren","i","removeAllChildren","sequence","delayTime","callFunc","onClickClean","runAction","num","generatorAddQuestion","rand1","Math","floor","random0To1","rand2","generatorSubQuestion","sub1","sub2","generatorMulQuestion","generatorDivideQuestion","amass","rand","updateQuestionUI","opacity","label","setLocalZOrder","action","fadeIn","updateLeftTime","leftTime","ceil","caluLeftTime","dt","update"],"mappings":"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","file":"gameController.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar EventListener = require(\"./event-listener\");\nvar global = require(\"./global\");\nvar tips = [\"广告阻碍了你的求知欲？却阻止不了对游戏,电视剧的狂热？\",\n            \"求知一下怎么了，说不定这次不用看广告呢\",\n            \"猜拳决定要不要看广告吧，说不定你今天运气爆棚呢！\",]\n            //算术达人之火柴人\n            //测一测你的心算能力，或许没有你认为的那么好，也没有你想象的那么差，经常用脑，提高记忆力和计算能力，妈妈再也不用担心我的数学成绩了\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Label, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        value: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Label, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        leftBtns: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        rightBtns: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        leftTimeLabel: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Label, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        teacher: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        truePrefab: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Prefab, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        falsePrefab: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Prefab, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        maxCostTime:10,\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var self = this\n        //玩家的本题答案\n        this.playerAnswer = \"\";\n        //是否已经主动答题\n        this.playerHasActiveAnswer = false\n        //是否已经准备好\n        this.ready = false\n        //向右跑\n        this.isRight = true\n        //是否正在计算本轮答题结果\n        this.isCaluingRoundResult = false\n        //中间变量，用来计算每道题剩余时间\n        this.left_time = 0\n        //本道题的花费时间\n        this.costTime = 0\n        //当前正在计算的题目编号\n        this.curAnswerringIdx = 1\n        this.world = cc.find(\"Canvas\")\n        this.bg = this.world.getChildByName(\"bg\")\n        this.scheduler = cc.director.getScheduler()\n        global.eventlistener = EventListener({});\n        global.eventlistener.on(\"enableOrUnenableBtn\",function(enable){\n            self.enableOrUnenableBtn(enable)\n        })\n        global.eventlistener.on(\"judgeResult\",function(){\n            self.judgeResult()\n        })\n        global.eventlistener.on(\"runForwardEnd\",function(){\n            // self.curAnswerringIdx += 1\n            // self.isRunning = false\n            // self.visibleQuestion()\n            global.eventlistener.fire(\"runLeftOrRightAction\",true)\n\n        })\n        global.eventlistener.on(\"runRightEnd\",function(){\n            self.curAnswerringIdx += 1\n            self.costTime = 0\n            self.isRunning = false\n            self.playerHasActiveAnswer = false\n            self.playerAnswer = \"\"\n            self.visibleQuestion(true)\n        })\n        global.eventlistener.on(\"runLeftEnd\",function(){\n            self.curAnswerringIdx = 1\n            self.playerHasActiveAnswer = false\n            self.playerAnswer = \"\"\n            self.judgeResult()\n        })\n        //进场后准备完毕（到达指定位置）\n        global.eventlistener.on(\"ready\",function(){\n            self.costTime = 0\n            self.ready = true\n            self.isRunning = false\n            //点亮答题按钮\n            self.enableOrUnenableBtn(true)\n            //随机出6道算术题\n            self.generatorCurRoundQuestions()\n            //显示当前正在回答的试题\n            self.visibleQuestion()\n        })\n        // cc.director.getCollisionManager().enabled = true;\n        // cc.director.getCollisionManager().enabledDebugDraw = true;\n        // cc.director.getCollisionManager().enabledDrawBoundingBox = true;\n    },\n\n    start () {\n        //本轮所有题目缓存\n        this.questions = []\n        //本轮正确答案缓存\n        this.rightResult = []\n        //玩家本轮答案缓存\n        this.playerAnswers = []\n        this.updateValue()\n        this.enableOrUnenableBtn(false)\n        this.scheduler.schedule(this.beginPrepare,this,1,0,0,false);\n    },\n    pauseOrResumeGame:function(){\n        if (cc.director.isPaused()){\n            cc.director.resume()\n        }else{\n            cc.director.pause()\n        }\n    },\n    beginPrepare:function(){\n        this.isRunning = true\n        global.eventlistener.fire(\"prepare\");\n    },\n    enableOrUnenableBtn:function(enable){\n        var leftBtns = this.leftBtns.children\n        for (var idx in leftBtns){\n            var btn = leftBtns[idx].getComponent(cc.Button)\n            btn.enableAutoGrayEffect = true\n            btn.interactable = enable\n        }\n        var rightBtns = this.rightBtns.children\n         for (var idx in rightBtns){\n            var btn = rightBtns[idx].getComponent(cc.Button)\n            btn.enableAutoGrayEffect = true\n            btn.interactable =enable\n        }\n    },\n    onClickNumber:function(event, customEventData){\n        this.playerAnswer += customEventData\n        global.eventlistener.fire(\"playAudio\",customEventData);\n        this.updateValue()\n        this.updatePreQuestionAnswer()\n    },\n    //计算已完成的题目数量（答对和答错的都算）\n    caluFinishQuestionNum:function(){\n        global.playerData.finishQuestiontotalNum += 1\n        return global.playerData.finishQuestiontotalNum\n    },\n    onClickSure:function(){\n        this.playerHasActiveAnswer = true\n        this.updatePlayerAnswer()\n        this.updateValue()\n        this.runPlayerAction()\n        this.updateQuestionAnswer()\n        var sysInfo = wx.getStorageInfo()\n        console.log(sysInfo,\"============sss=====\")\n    },\n    updateQuestionAnswer:function(){\n        var question = this.bg.getChildByName(\"question\" + this.curAnswerringIdx)\n        var questionLabel = question.getComponent(cc.Label)\n        questionLabel.string += this.playerAnswers[this.curAnswerringIdx -1]\n    },\n    updatePreQuestionAnswer:function(){\n\n    },\n    updatePlayerAnswer:function(){\n        this.playerAnswers[this.playerAnswers.length] = this.playerAnswer || \"?\"\n    },\n    judgeQuestions:function(){\n        var self = this\n        var idx = 0\n        this.scheduler.schedule(function(){\n            var question = this.bg.getChildByName(\"question\" + (idx + 1))\n            if (self.playerAnswers[idx] == self.rightResult[idx]){\n                var truePrefab = cc.instantiate(self.truePrefab)\n                truePrefab.setPosition(30,0)\n                question.addChild(truePrefab)\n            }else{\n                var falsePrefab = cc.instantiate(self.falsePrefab)\n                falsePrefab.setPosition(30,0)\n                question.addChild(falsePrefab)\n            }\n            idx +=1;\n        },this,1.5,5,1,false);\n    },\n    removeQuestionChildren:function(){\n        for(var i = 1;i<=6;i++){\n            var question = this.bg.getChildByName(\"question\" + i)\n            question.removeAllChildren()\n        }\n    },\n    judgeResult:function(){\n        this.isCaluingRoundResult = true\n        this.enableOrUnenableBtn(false)\n        this.judgeQuestions()\n        var self = this\n        // cc.log(\"judgeResult=====\")\n        var sequence = cc.sequence(cc.delayTime(13),cc.callFunc(function(){\n            self.enableOrUnenableBtn(true)\n            self.generatorCurRoundQuestions()\n            self.costTime = 0\n            self.onClickClean()\n            self.isCaluingRoundResult = false\n            global.eventlistener.fire(\"ready\")\n            // cc.log(\"==============judgeResult===aa==\")\n        }))\n        this.teacher.runAction(sequence)\n        // this.scheduler.schedule(this.caluResult,this,10,6,0,false)\n    },\n    onClickClean:function(){\n        this.playerAnswer = \"\"\n        this.updateValue()\n    },\n    updateValue:function(){\n        this.value.string = this.playerAnswer\n    },\n\n    //==============================试题出题逻辑及人物行走动画控制============================\n    runPlayerAction:function(){\n        this.isRunning = true\n        var num = this.caluFinishQuestionNum()\n        if (this.curAnswerringIdx == 1){\n            global.eventlistener.fire(\"runForwardOrBackAction\",true)\n            return\n        }else if(this.curAnswerringIdx == 6){\n            global.eventlistener.fire(\"runForwardOrBackAction\",false)\n            return\n        }\n        global.eventlistener.fire(\"runLeftOrRightAction\",true)\n    },\n    generatorAddQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 9)\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        this.rightResult[this.rightResult.length] = rand1 + rand2\n        this.questions[this.questions.length] = (rand1 + \"+\" + rand2 + \"=\")\n    },\n    generatorSubQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 9)\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        var sub1 = rand1 > rand2?rand1:rand2\n        var sub2 = rand1 < rand2?rand1:rand2\n        this.rightResult[this.rightResult.length] = sub1 - sub2\n        this.questions[this.questions.length] = (sub1 + \"-\" + sub2 + \"=\")\n    },\n    generatorMulQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 9)\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        this.rightResult[this.rightResult.length] = rand1 * rand2\n        this.questions[this.questions.length] = (rand1 + \"X\" + rand2 + \"=\")\n    },\n    generatorDivideQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 8) + 1\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        var amass = rand1 * rand2\n        this.rightResult[this.rightResult.length] = rand2\n        this.questions[this.questions.length] = (amass + \"/\" + rand1 + \"=\")\n    },\n    generatorCurRoundQuestions:function(){\n        this.removeQuestionChildren()\n        this.curAnswerringIdx = 1\n        this.rightResult = []\n        this.questions = []\n        this.playerAnswers = []\n        for (var i = 1;i<7;i++){\n            var rand = Math.floor(cc.random0To1() * 99) + 1\n            if (rand <=25){\n                this.generatorAddQuestion()\n            }else if(rand > 25 && rand <= 50){\n                this.generatorSubQuestion()\n            }else if(rand > 50 && rand <= 75){\n                this.generatorMulQuestion()\n            }else{\n                this.generatorDivideQuestion()\n            }\n        }\n       this.updateQuestionUI()\n    },\n    updateQuestionUI:function(){\n        for (var i = 0;i<6;i++){\n            var question = this.bg.getChildByName(\"question\" + (i + 1))\n            if (i != 0){\n                question.opacity = 0\n            }\n            var label = question.getComponent(cc.Label)\n            question.setLocalZOrder(9998)\n            label.string = this.questions[i]\n        }\n    },\n    visibleQuestion:function(){\n        var question = this.bg.getChildByName(\"question\" + this.curAnswerringIdx)\n        var action = cc.fadeIn(0.5)\n        question.runAction(action)\n    },\n    updateLeftTime:function(leftTime){\n        this.leftTimeLabel.string = Math.ceil(leftTime)\n    },\n    caluLeftTime:function(dt){\n        this.costTime += dt\n        this.left_time = (this.maxCostTime - this.costTime < 0)?0:(this.maxCostTime - this.costTime)\n        this.updateLeftTime(this.left_time)\n        if (this.costTime >= this.maxCostTime){\n            if (this.playerHasActiveAnswer == false){\n                this.onClickSure()\n                this.onClickClean()\n            }\n        }\n    },\n    update (dt) {\n        if (this.isCaluingRoundResult == false && this.isRunning == false && this.ready == true){\n            this.caluLeftTime(dt)    \n        }   \n    },\n});\n"]}