{"version":3,"sources":["gameController.js"],"names":["EventListener","require","global","tips","cc","Class","extends","Component","properties","score","default","type","Label","serializable","value","leftBtns","Node","rightBtns","leftTimeLabel","teacher","truePrefab","Prefab","falsePrefab","maxCostTime","onLoad","self","playerAnswer","playerHasActiveAnswer","ready","isRight","isCaluingRoundResult","left_time","costTime","lastCostTime","curAnswerringIdx","world","find","mask","getChildByName","bg","prompt","pause_btn","pause_label","getComponent","scheduler","director","getScheduler","eventlistener","on","enable","enableOrUnenableBtn","judgeResult","fire","isRunning","visibleQuestion","generatorCurRoundQuestions","start","questions","rightResult","playerAnswers","updateValue","pauseOrResumeGame","isPaused","string","resume","pause","beginPrepare","active","children","idx","btn","Button","enableAutoGrayEffect","interactable","onClickNumber","event","customEventData","updatePreQuestionAnswer","caluFinishQuestionNum","playerData","finishQuestiontotalNum","onClickSure","updatePlayerAnswer","runPlayerAction","updateQuestionAnswer","sys","isNative","sysInfo","wx","getStorageInfo","console","log","question","questionLabel","length","judgeQuestions","schedule","instantiate","setPosition","addChild","removeQuestionChildren","i","removeAllChildren","sequence","delayTime","callFunc","initCostTime","onClickClean","runAction","num","generatorAddQuestion","rand1","Math","floor","random0To1","rand2","generatorSubQuestion","sub1","sub2","generatorMulQuestion","generatorDivideQuestion","amass","rand","updateQuestionUI","opacity","label","setLocalZOrder","action","fadeIn","updateLeftTime","leftTime","ceil","updateCostTime","toFixed","caluLeftTime","dt","curMode","TESTMODE","update"],"mappings":"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","file":"gameController.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar EventListener = require(\"./event-listener\");\nvar global = require(\"./global\");\nvar tips = [\"广告阻碍了你的求知欲？却阻止不了对游戏,电视剧的狂热？\",\n            \"求知一下怎么了，说不定这次不用看广告呢\",\n            \"猜拳决定要不要看广告吧，说不定你今天运气爆棚呢！\",]\n            //算术达人之火柴人\n            //测一测你的心算能力，或许没有你认为的那么好，也没有你想象的那么差，经常用脑，提高记忆力和计算能力，妈妈再也不用担心我的数学成绩了\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        score: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Label, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        value: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Label, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        leftBtns: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        rightBtns: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        leftTimeLabel: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Label, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        teacher: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Node, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        truePrefab: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Prefab, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        falsePrefab: {\n            // ATTRIBUTES:\n            default: null,        // The default value will be used only when the component attaching\n                                  // to a node for the first time\n            type: cc.Prefab, // optional, default is typeof default\n            serializable: true,   // optional, default is true\n        },\n        maxCostTime:10,\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        var self = this\n        //玩家的本题答案\n        this.playerAnswer = \"\";\n        //是否已经主动答题\n        this.playerHasActiveAnswer = false\n        //是否已经准备好\n        this.ready = false\n        //向右跑\n        this.isRight = true\n        //是否正在计算本轮答题结果\n        this.isCaluingRoundResult = false\n        //中间变量，用来计算每道题剩余时间\n        this.left_time = 0\n        //本道题的花费时间\n        this.costTime = 0\n        this.lastCostTime = 0\n        //当前正在计算的题目编号\n        this.curAnswerringIdx = 1\n        this.world = cc.find(\"Canvas\")\n        this.mask = this.world.getChildByName(\"mask\")\n        this.bg = this.world.getChildByName(\"bg\")\n        this.prompt = this.bg.getChildByName(\"blackboard\").getChildByName(\"prompt\")\n        this.pause_btn = this.bg.getChildByName(\"right\").getChildByName(\"pause\")\n        this.pause_label = this.pause_btn.getChildByName(\"Label\").getComponent(cc.Label)\n        this.scheduler = cc.director.getScheduler()\n        global.eventlistener = EventListener({});\n        global.eventlistener.on(\"enableOrUnenableBtn\",function(enable){\n            self.enableOrUnenableBtn(enable)\n        })\n        global.eventlistener.on(\"judgeResult\",function(){\n            self.judgeResult()\n        })\n        global.eventlistener.on(\"runForwardEnd\",function(){\n            global.eventlistener.fire(\"runLeftOrRightAction\",true)\n        })\n        global.eventlistener.on(\"runRightEnd\",function(){\n            self.curAnswerringIdx += 1\n            self.costTime = 0\n            self.isRunning = false\n            self.playerHasActiveAnswer = false\n            self.playerAnswer = \"\"\n            self.visibleQuestion(true)\n        })\n        global.eventlistener.on(\"runLeftEnd\",function(){\n            self.curAnswerringIdx = 1\n            self.playerHasActiveAnswer = false\n            self.playerAnswer = \"\"\n            self.judgeResult()\n        })\n        //进场后准备完毕（到达指定位置）\n        global.eventlistener.on(\"ready\",function(){\n            self.costTime = 0\n            self.ready = true\n            self.isRunning = false\n            //点亮答题按钮\n            self.enableOrUnenableBtn(true)\n            //随机出6道算术题\n            self.generatorCurRoundQuestions()\n            //显示当前正在回答的试题\n            self.visibleQuestion()\n        })\n        // cc.director.getCollisionManager().enabled = true;\n        // cc.director.getCollisionManager().enabledDebugDraw = true;\n        // cc.director.getCollisionManager().enabledDrawBoundingBox = true;\n    },\n\n    start () {\n        //本轮所有题目缓存\n        this.questions = []\n        //本轮正确答案缓存\n        this.rightResult = []\n        //玩家本轮答案缓存\n        this.playerAnswers = []\n        this.updateValue()\n        this.enableOrUnenableBtn(false)\n        // this.scheduler.schedule(this.beginPrepare,this,1,0,0,false);\n    },\n    pauseOrResumeGame:function(){\n        if (cc.director.isPaused()){\n            this.pause_label.string = \"暂停\"\n            cc.director.resume()\n        }else{\n            this.pause_label.string = \"继续\"\n            cc.director.pause()\n        }\n    },\n    beginPrepare:function(){\n        this.mask.active = false\n        this.prompt.active = false\n        this.isRunning = true\n        global.eventlistener.fire(\"prepare\");\n    },\n    enableOrUnenableBtn:function(enable){\n        var leftBtns = this.leftBtns.children\n        for (var idx in leftBtns){\n            var btn = leftBtns[idx].getComponent(cc.Button)\n            btn.enableAutoGrayEffect = true\n            btn.interactable = enable\n        }\n        var rightBtns = this.rightBtns.children\n         for (var idx in rightBtns){\n            var btn = rightBtns[idx].getComponent(cc.Button)\n            btn.enableAutoGrayEffect = true\n            btn.interactable =enable\n        }\n    },\n    onClickNumber:function(event, customEventData){\n        this.playerAnswer += customEventData\n        global.eventlistener.fire(\"playAudio\",customEventData);\n        this.updateValue()\n        this.updatePreQuestionAnswer()\n    },\n    //计算已完成的题目数量（答对和答错的都算）\n    caluFinishQuestionNum:function(){\n        global.playerData.finishQuestiontotalNum += 1\n        return global.playerData.finishQuestiontotalNum\n    },\n    onClickSure:function(){\n        this.playerHasActiveAnswer = true\n        this.costTime = 0\n        this.lastCostTime = 0\n        this.updatePlayerAnswer()\n        this.updateValue()\n        this.runPlayerAction()\n        this.updateQuestionAnswer()\n        if (!cc.sys.isNative){\n            var sysInfo = wx.getStorageInfo()\n            console.log(sysInfo,\"============sss=====\")\n        }\n    },\n    updateQuestionAnswer:function(){\n        var question = this.bg.getChildByName(\"question\" + this.curAnswerringIdx)\n        var questionLabel = question.getComponent(cc.Label)\n        questionLabel.string += this.playerAnswers[this.curAnswerringIdx -1]\n    },\n    updatePreQuestionAnswer:function(){\n\n    },\n    updatePlayerAnswer:function(){\n        this.playerAnswers[this.playerAnswers.length] = this.playerAnswer || \"?\"\n    },\n    judgeQuestions:function(){\n        var self = this\n        var idx = 0\n        this.scheduler.schedule(function(){\n            var question = this.bg.getChildByName(\"question\" + (idx + 1))\n            if (self.playerAnswers[idx] == self.rightResult[idx]){\n                var truePrefab = cc.instantiate(self.truePrefab)\n                truePrefab.setPosition(30,0)\n                question.addChild(truePrefab)\n            }else{\n                var falsePrefab = cc.instantiate(self.falsePrefab)\n                falsePrefab.setPosition(30,0)\n                question.addChild(falsePrefab)\n            }\n            idx +=1;\n        },this,1.5,5,1,false);\n    },\n    removeQuestionChildren:function(){\n        for(var i = 1;i<=6;i++){\n            var question = this.bg.getChildByName(\"question\" + i)\n            question.removeAllChildren()\n        }\n    },\n    judgeResult:function(){\n        this.isCaluingRoundResult = true\n        this.enableOrUnenableBtn(false)\n        this.judgeQuestions()\n        var self = this\n        // cc.log(\"judgeResult=====\")\n        var sequence = cc.sequence(cc.delayTime(13),cc.callFunc(function(){\n            self.enableOrUnenableBtn(true)\n            self.generatorCurRoundQuestions()\n            self.costTime = 0\n            self.initCostTime()\n            self.onClickClean()\n            self.isCaluingRoundResult = false\n            global.eventlistener.fire(\"ready\")\n            // cc.log(\"==============judgeResult===aa==\")\n        }))\n        this.teacher.runAction(sequence)\n        // this.scheduler.schedule(this.caluResult,this,10,6,0,false)\n    },\n    onClickClean:function(){\n        this.playerAnswer = \"\"\n        this.updateValue()\n    },\n    updateValue:function(){\n        this.value.string = this.playerAnswer\n    },\n\n    //==============================试题出题逻辑及人物行走动画控制============================\n    runPlayerAction:function(){\n        this.isRunning = true\n        var num = this.caluFinishQuestionNum()\n        if (this.curAnswerringIdx == 1){\n            global.eventlistener.fire(\"runForwardOrBackAction\",true)\n            return\n        }else if(this.curAnswerringIdx == 6){\n            global.eventlistener.fire(\"runForwardOrBackAction\",false)\n            return\n        }\n        global.eventlistener.fire(\"runLeftOrRightAction\",true)\n    },\n    generatorAddQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 9)\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        this.rightResult[this.rightResult.length] = rand1 + rand2\n        this.questions[this.questions.length] = (rand1 + \"+\" + rand2 + \"=\")\n    },\n    generatorSubQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 9)\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        var sub1 = rand1 > rand2?rand1:rand2\n        var sub2 = rand1 < rand2?rand1:rand2\n        this.rightResult[this.rightResult.length] = sub1 - sub2\n        this.questions[this.questions.length] = (sub1 + \"-\" + sub2 + \"=\")\n    },\n    generatorMulQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 9)\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        this.rightResult[this.rightResult.length] = rand1 * rand2\n        this.questions[this.questions.length] = (rand1 + \"X\" + rand2 + \"=\")\n    },\n    generatorDivideQuestion:function(){\n        var rand1 = Math.floor(cc.random0To1() * 8) + 1\n        var rand2 = Math.floor(cc.random0To1() * 9)\n        var amass = rand1 * rand2\n        this.rightResult[this.rightResult.length] = rand2\n        this.questions[this.questions.length] = (amass + \"/\" + rand1 + \"=\")\n    },\n    generatorCurRoundQuestions:function(){\n        this.removeQuestionChildren()\n        this.curAnswerringIdx = 1\n        this.rightResult = []\n        this.questions = []\n        this.playerAnswers = []\n        for (var i = 1;i<7;i++){\n            var rand = Math.floor(cc.random0To1() * 99) + 1\n            if (rand <=25){\n                this.generatorAddQuestion()\n            }else if(rand > 25 && rand <= 50){\n                this.generatorSubQuestion()\n            }else if(rand > 50 && rand <= 75){\n                this.generatorMulQuestion()\n            }else{\n                this.generatorDivideQuestion()\n            }\n        }\n       this.updateQuestionUI()\n    },\n    updateQuestionUI:function(){\n        for (var i = 0;i<6;i++){\n            var question = this.bg.getChildByName(\"question\" + (i + 1))\n            if (i != 0){\n                question.opacity = 0\n            }\n            var label = question.getComponent(cc.Label)\n            question.setLocalZOrder(9998)\n            label.string = this.questions[i]\n        }\n    },\n    visibleQuestion:function(){\n        var question = this.bg.getChildByName(\"question\" + this.curAnswerringIdx)\n        var action = cc.fadeIn(0.5)\n        question.runAction(action)\n    },\n    updateLeftTime:function(leftTime){\n        this.leftTimeLabel.string = Math.ceil(leftTime)\n    },\n    updateCostTime:function(){\n        cc.log(this.curAnswerringIdx,\"========curAnswerringIdx===\")\n       var costTime = this.bg.getChildByName(\"costTime\" + this.curAnswerringIdx)\n       costTime.getComponent(cc.Label).string = this.costTime.toFixed(2) + \"s\"\n    },\n    initCostTime:function(){\n        for (var i = 1;i<=6;i++){\n            var costTime = this.bg.getChildByName(\"costTime\" + i)\n            costTime.getComponent(cc.Label).string = \"\"\n        }\n    },\n    caluLeftTime:function(dt){\n        this.costTime += dt\n        if (global.playerData.curMode == global.playerData.TESTMODE){\n            this.left_time = (this.maxCostTime - this.costTime < 0)?0:(this.maxCostTime - this.costTime)\n            this.updateLeftTime(this.left_time)\n            if (this.costTime >= this.maxCostTime){\n                if (this.playerHasActiveAnswer == false){\n                    this.onClickSure()\n                    this.onClickClean()\n                }\n            }\n        }else{\n            if (this.costTime - this.lastCostTime >=0.1){\n                this.lastCostTime = this.costTime\n                this.updateCostTime()\n            }\n        }\n    },\n    update (dt) {\n        if (this.isCaluingRoundResult == false && this.isRunning == false && this.ready == true){\n            this.caluLeftTime(dt)    \n        }   \n    },\n});\n"]}