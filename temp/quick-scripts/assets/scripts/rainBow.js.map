{"version":3,"sources":["rainBow.js"],"names":["global","require","cc","Class","extends","Component","properties","id","start","scheduler","director","getScheduler","curFillingRainBow","self","world","find","rainbow","getChildByName","animation","getComponent","Animation","eventlistener","on","runFadeAction","fillRainBow","initProgress","randProgress","random0To1","toFixed","filledProgress","updateProgress","randTime","Math","floor","play","schedule","stop","log","progress","bar","ProgressBar"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIA,SAASC,QAAQ,UAAR,CAAb;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,YAAG;AADK,KAHP;AAML;;AAEAC,SARK,mBAQI;AACL,aAAKC,SAAL,GAAiBP,GAAGQ,QAAH,CAAYC,YAAZ,EAAjB;AACA,aAAKC,iBAAL,GAAyB,CAAzB;AACA,YAAIC,OAAO,IAAX;AACA,aAAKC,KAAL,GAAaZ,GAAGa,IAAH,CAAQ,QAAR,CAAb;AACA,YAAIC,UAAU,KAAKF,KAAL,CAAWG,cAAX,CAA0B,YAAW,KAAKV,EAA1C,CAAd;AACA,aAAKW,SAAL,GAAiBF,QAAQG,YAAR,CAAqBjB,GAAGkB,SAAxB,CAAjB;AACApB,eAAOqB,aAAP,CAAqBC,EAArB,CAAwB,eAAxB,EAAwC,UAASf,EAAT,EAAY;AAChDM,iBAAKD,iBAAL,GAAyBL,EAAzB;AACAM,iBAAKU,aAAL;AACH,SAHD;AAIAvB,eAAOqB,aAAP,CAAqBC,EAArB,CAAwB,cAAxB,EAAuC,YAAU;AAC7CT,iBAAKW,WAAL;AACH,SAFD;AAGA,aAAKC,YAAL;AACH,KAvBI;;AAwBLA,kBAAa,wBAAU;AACnB,YAAIC,eAAe,CAACxB,GAAGyB,UAAH,KAAkB,EAAnB,EAAuBC,OAAvB,CAA+B,CAA/B,CAAnB;AACA,aAAKC,cAAL,GAAsB,CAAtB;AACA,aAAKC,cAAL;AACH,KA5BI;AA6BLP,mBAAc,yBAAU;AACpB,YAAI,KAAKhB,EAAL,IAAW,KAAKK,iBAApB,EAAsC;AACnC;AACF;AACD,YAAImB,WAAWC,KAAKC,KAAL,CAAW/B,GAAGyB,UAAH,KAAkB,EAA7B,IAAmC,CAAlD;AACA,YAAId,OAAO,IAAX;AACA,aAAKK,SAAL,CAAegB,IAAf;AACA,aAAKzB,SAAL,CAAe0B,QAAf,CAAwB,YAAU;AAC9BtB,iBAAKK,SAAL,CAAekB,IAAf;AACH,SAFD,EAEE,IAFF,EAEOL,QAFP,EAEgB,CAFhB,EAEkB,CAFlB,EAEoB,KAFpB;AAGH,KAvCI;AAwCLP,iBAAY,uBAAU;AAClB,aAAKK,cAAL,IAAuB,IAAvB;AACA,aAAKC,cAAL;AACH,KA3CI;AA4CLA,oBAAe,0BAAU;AACrB5B,WAAGmC,GAAH,CAAO,KAAK9B,EAAZ,EAAe,sBAAf;AACA,YAAI+B,WAAW,KAAKxB,KAAL,CAAWG,cAAX,CAA0B,YAAY,KAAKV,EAA3C,CAAf;AACA,YAAIgC,MAAMD,SAASnB,YAAT,CAAsBjB,GAAGsC,WAAzB,CAAV;AACAD,YAAID,QAAJ,GAAe,KAAKT,cAApB;AACH;AACD;AAlDK,CAAT","file":"rainBow.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\nvar global = require(\"./global\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        id:1,\n    },\n    // onLoad () {},\n\n    start () {\n        this.scheduler = cc.director.getScheduler()\n        this.curFillingRainBow = 1\n        var self = this\n        this.world = cc.find(\"Canvas\")\n        var rainbow = this.world.getChildByName(\"rainbow\"+ this.id)\n        this.animation = rainbow.getComponent(cc.Animation)\n        global.eventlistener.on(\"runFadeAction\",function(id){\n            self.curFillingRainBow = id\n            self.runFadeAction()\n        })\n        global.eventlistener.on(\"fillProgress\",function(){\n            self.fillRainBow()\n        })\n        this.initProgress()\n    },\n    initProgress:function(){\n        var randProgress = (cc.random0To1() * 30).toFixed(2)\n        this.filledProgress = 0\n        this.updateProgress()\n    },\n    runFadeAction:function(){\n        if (this.id != this.curFillingRainBow){\n           return \n        }\n        var randTime = Math.floor(cc.random0To1() * 10) + 5\n        var self = this\n        this.animation.play()\n        this.scheduler.schedule(function(){\n            self.animation.stop()\n        },this,randTime,0,0,false)\n    },\n    fillRainBow:function(){\n        this.filledProgress += 0.01\n        this.updateProgress()\n    },\n    updateProgress:function(){\n        cc.log(this.id,\"============id======\")\n        var progress = this.world.getChildByName(\"rainbow\" + this.id)\n        var bar = progress.getComponent(cc.ProgressBar)\n        bar.progress = this.filledProgress\n    },\n    // update (dt) {},\n});\n"]}